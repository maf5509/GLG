(self.webpackChunklite=self.webpackChunklite||[]).push([[6375],{33336:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M17.4 7s2.64 3.56 0 6.88M15 8.56s1.6 2.38 0 4.4"})),a=r.createElement("path",{d:"M11.9 3.01a.19.19 0 0 0-.19.04L6.47 7.7H3.2c-.09 0-.21.06-.21.14v5.28c0 .08.12.3.21.3h3.14L11.72 18h.18a.17.17 0 0 0 .1-.15V3.14a.14.14 0 0 0-.1-.14z"});const l=function(e){return r.createElement("svg",o({width:21,height:21},e),i,a)}},94093:(e,t,n)=>{"use strict";n.d(t,{I:()=>m});var r,o=n(59713),i=n.n(o),a=n(67294);!function(e){e.S="S",e.L="L"}(r||(r={}));var l=n(42933),s=n(98024),c=n(6688),u=n(80637),p=n(67122),m=function(e){var t=e.children,n=e.scale,o=void 0===n?r.L:n,m=e.alpha,d=void 0===m?.05:m,f=e.verticalMargins,g=void 0===f?{normal:"24px",small:"24px"}:f,v=(0,c.I)();return a.createElement("div",{className:v((function(e){return i()({background:(0,p.Uy)(d),borderRadius:"4px",margin:"".concat(g.normal," -16px"),position:"relative"},u.sm(e),{margin:"".concat(g.small," -12px 0")})}))},a.createElement(l.x,{display:"flex",justifyContent:"space-between",maxWidth:"740px",padding:"16px",sm:{padding:"12px"}},a.createElement(s.F,{scale:o,color:"DARKER"},t)))}},55253:(e,t,n)=>{"use strict";n.d(t,{mV:()=>We,Xc:()=>$e,Z3:()=>ze});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(12291),s=n(63038),c=n.n(s),u=n(59713),p=n.n(u),m=n(42933),d=n(98024),f=n(6688),g=n(99701),v={"0%":{visibility:"hidden"},"1%":{visibility:"visible",opacity:0},"100%":{opacity:1}},E={"0%":{opacity:1,visibility:"visible"},"99%":{opacity:0},"100%":{visibility:"hidden"}},h=function(e){return{display:"flex",justifyContent:"flex-start",alignItems:"center",flexGrow:1,height:"2px",cursor:"pointer",":focus":{outline:"1px dotted ".concat(e.baseColor.fill.normal)}}},x=function(e){return{backgroundColor:e.baseColor.fill.normal,position:"relative",marginLeft:"-5px",height:"10px",width:"10px",borderRadius:"50%",cursor:"pointer"}};function y(e){var t=~~(e%60);return[~~(e/60),t<10?"0"+t:t].join(":")}var b=function(e){var t=e.duration,n=e.elapsed,r=e.isProgressBeanVisible,o=e.onEnter,i=e.onLeave,l=e.onProgressBeanAnimationEnd,s=e.onTimeUpdate,c=e.shouldProgressBeanAnimate,u=(0,f.I)(),p=(0,g.o)({fadeInKeyframesName:v,fadeOutKeyframesName:E}),b=p.fadeInKeyframesName,w=p.fadeOutKeyframesName,I=a.useRef(null),P=n&&t?Math.max(0,Math.min(n/t*100,100)):0,S={left:"".concat(P,"%"),opacity:r?1:0},O=a.useCallback((function(e){var n=e.pageX,r=document.getElementById("audio-player-progress-bar"),o=n-(r.getBoundingClientRect().left+window.scrollX);return t/r.offsetWidth*o}),[t]),C=a.useCallback((function(e){function t(e){s(O(e))}0===e.button&&(s(O(e)),document.addEventListener("mousemove",t),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)})))}),[O,i,s]),k=a.useCallback((function(e){"ArrowLeft"===e.key?s(Math.max(n-5,0)):"ArrowRight"===e.key&&s(Math.min(n+5,t))}),[n,t,s]),L=a.useCallback((function(){document.activeElement!==I.current&&i()}),[null==I?void 0:I.current,i]),_=[x,S];return c&&_.push({animation:"".concat(r?b:w," .2s ease-in-out forwards")}),a.createElement(m.x,{display:"flex",alignItems:"center"},a.createElement(m.x,{width:"28px",marginRight:"12px",textAlign:"left"},a.createElement(d.F,{scale:"M"},n?y(n):"--:--")),a.createElement("div",{className:u([h,function(e){return{background:"linear-gradient(to right, ".concat(e.baseColor.fill.normal," ").concat(P,"%, ").concat(e.baseColor.background.normal," 0)")}}]),id:"audio-player-progress-bar",role:"slider",ref:I,"aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":n,tabIndex:0,onMouseDown:C,onFocus:o,onBlur:L,onKeyDown:k,onMouseEnter:o,onMouseLeave:L},a.createElement("div",{className:u(_),onAnimationEnd:l})),a.createElement(m.x,{width:"28px",marginLeft:"12px",textAlign:"right"},a.createElement(d.F,{scale:"M"},t?y(t):"--:--")))},w=n(95760);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=a.createElement("g",{transform:"translate(5 4)",fillRule:"evenodd"},a.createElement("rect",{width:6,height:17,rx:2}),a.createElement("rect",{x:9,width:6,height:17,rx:2}));const S=function(e){return a.createElement("svg",I({width:25,height:25},e),P)};function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=a.createElement("path",{d:"M7 4v17.03a.5.5 0 0 0 .8.4l11.1-8.1a1 1 0 0 0 0-1.62L7.8 3.6A.5.5 0 0 0 7 4z"});const k=function(e){return a.createElement("svg",O({width:25,height:25},e),C)};var L=function(e){return{borderRadius:"4px",padding:"8px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",display:"inline-block",textDecoration:"none",color:e.baseColor.text.normal,fill:e.baseColor.fill.normal,background:0,borderColor:e.baseColor.border.dark,":hover":{cursor:"pointer",color:e.baseColor.text.darker,fill:e.baseColor.fill.darker,borderColor:e.baseColor.border.darker}}},_=function(e){var t=e.dispatch,n=e.postId,r=e.isPlaying,o=(0,f.I)(),i=(0,w.Av)(),l=a.useCallback((function(){var e=document.getElementById("audio-player");r?(i.event("audio.end",{postId:n}),e.pause(),t({type:"pause"})):(i.event("audio.start",{postId:n}),e.play(),t({type:"play"}))}),[r]);return a.createElement("button",{onClick:l,className:o(L)},r?a.createElement(S,null):a.createElement(k,null))},T=n(89423),D=n(62876),R=n(54389),A=n(51512),N=n(96907),M=n(33336);function j(){var e=o()(["\n  fragment AudioPlayback_post on Post {\n    id\n    audioVersionUrl\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    ...UpsellClickable_post\n  }\n  ","\n"]);return j=function(){return e},e}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F={duration:0,elapsed:0,playing:!1},H=function(e,t){switch(t.type){case"load":return B(B({},e),{},{duration:t.duration});case"play":return B(B({},e),{},{playing:!0});case"pause":return B(B({},e),{},{playing:!1});case"seek":return B(B({},e),{},{elapsed:t.clickedTime});case"progress":return B(B({},e),{},{elapsed:t.elapsed});case"end":return B(B({},e),{},{playing:!1});default:return e}},K=function(e){var t=e.postId,n=e.audioVersionUrl,r=a.useReducer(H,F),o=c()(r,2),i=o[0],l=o[1],s=i.duration,u=i.elapsed,p=i.playing,f=a.useState(!1),g=c()(f,2),v=g[0],E=g[1],h=a.useState(!1),x=c()(h,2),y=x[0],w=x[1],I=a.useCallback((function(){E((function(e){return w(!!e),!1}))}),[]),P=a.useCallback((function(){E((function(e){return w(!e),!0}))}),[]);return a.useEffect((function(){var e=document.getElementById("audio-player");function t(){l({type:"load",duration:e.duration})}function n(){l({type:"progress",elapsed:e.currentTime})}function r(){l({type:"end"})}return e.addEventListener("canplay",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),function(){e.removeEventListener("canplay",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r)}}),[]),a.useEffect((function(){var e=document.getElementById("audio-player");Math.round(u)!==Math.round(e.currentTime)&&document.hasFocus()&&(e.currentTime=u)}),[u]),a.createElement(m.x,{display:"flex",justifyContent:"center",margin:"20px 0"},a.createElement("audio",{id:"audio-player"},a.createElement("source",{src:n})),a.createElement(m.x,{display:"flex",alignItems:"center",flexGrow:"1"},a.createElement(m.x,{marginRight:"16px"},a.createElement(_,{dispatch:l,postId:t,isPlaying:p})),a.createElement(m.x,{display:"flex",flexDirection:"column",flexGrow:"1"},a.createElement(d.F,{scale:"M",color:"DARKER"},"Listen to this story"),a.createElement(b,{elapsed:u,duration:s,isProgressBeanVisible:v,onEnter:P,onLeave:I,onProgressBeanAnimationEnd:function(){return w(!1)},onTimeUpdate:function(e){return l({type:"seek",clickedTime:Math.max(0,Math.min(e,s))})},shouldProgressBeanAnimate:y}))))},V=function(e){return{fill:e.baseColor.fill.light,marginLeft:"15px",marginRight:"15px"}},G=function(e){var t=e.post,n=(0,f.I)();return a.createElement(R.M,{columns:8,display:"flex",flexShrink:"0",margin:"30px 0",padding:"20px 12px",backgroundColor:"BASE_LIGHT"},a.createElement(M.Z,{className:n(V)}),a.createElement(d.F,{scale:"S",color:"DARKER",tag:"span"},"Psst... there’s an audio version of this story."," ",a.createElement(D.a,{post:t,linkStyle:"OBVIOUS"},"Upgrade to listen")))};function W(e){var t=e.post,n=t.id,r=t.audioVersionUrl,o=(t.content||{}).isLockedPreviewOnly;return a.createElement(m.x,{marginTop:"30px"},a.createElement(T.I,null,(function(e){return e&&e.mediumMemberAt||!o?a.createElement(K,{postId:n,audioVersionUrl:r}):a.createElement(A.cW,{source:{dimension:"audio_exclusive",name:"upgrade_membership",postId:n}},a.createElement(N.M,null,a.createElement(G,{post:t})))})))}var z=(0,i.Ps)(j(),D.H),$=n(50008),X=n.n($),Y=n(23450),Q=n.n(Y),J=n(94093),q=n(51562),Z=function(e){var t=e.featureString,n=e.link,r=e.text,o=e.showTrialMeter;return a.createElement(q.W,{featureString:t,target:o?"cc-trial-highlight-box":"highlight-box"},a.createElement(J.I,null,a.createElement(q.W,{featureString:t,target:o?"cc-trial-copy":"copy",tag:"span"},r," "),a.createElement(m.x,{display:"inline",whiteSpace:"nowrap"},a.createElement(q.W,{featureString:t,target:o?"cc-trial-link":"link",tag:"span"},n))))},ee=n(66893),te=n(76532),ne=n(5731),re=n(67297),oe=n(27952);function ie(){var e=o()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return ie=function(){return e},e}var ae=function(e){var t=e.meterCount,n=e.meterLimit,r=e.post,o=(0,te.H)().value,i=(0,w.Av)(),l=null==o?void 0:o.isMembershipTrialEligible,s=!(!(0,ee.P5)("enable_trial_upsell")||!l),c="li-highlight-meter-".concat(t);a.useEffect((function(){i.event("meter.viewed",{uiType:ne.j.LIHighlightCTA,postId:r.id,meterCount:t,userId:null==o?void 0:o.id}),l&&i.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var u,p=(0,re.v9)((function(e){return e.config.authDomain})),m=a.createElement(N.M,{tag:"span"},a.createElement(D.a,{linkStyle:"OBVIOUS",post:r,inline:!0,redirectUrl:(0,oe.c5p)(p)},s?"Start your free trial":"Upgrade for unlimited access."));return a.createElement(A.cW,{source:{dimension:"post_counter",name:"upgrade_membership",postId:r.id}},a.createElement(Z,{featureString:c,text:(u=n-t,u<=0?a.createElement(a.Fragment,null,"This is your ",a.createElement("b",null,"last")," free member-only story this month."):a.createElement(a.Fragment,null,"You have ",a.createElement("b",null,u)," free member-only ",Q()("story",u)," left this month.")),link:m,showTrialMeter:s}))},le=(0,i.Ps)(ie(),D.H),se=n(62181);function ce(){var e=o()(["\n  fragment LOHighlightMeter_post on Post {\n    id\n  }\n"]);return ce=function(){return e},e}var ue=function(e){switch(e){case 1:return a.createElement(a.Fragment,null,"You have ",a.createElement("b",null,"2")," free member-only stories left this month.");case 2:return a.createElement(a.Fragment,null,"You have ",a.createElement("b",null,"1")," free member-only story left this month.");case 3:return a.createElement(a.Fragment,null,"This is your ",a.createElement("b",null,"last")," free member-only story this month.");default:return a.createElement(a.Fragment,null,"You've read all your free member-only stories this month.")}},pe=function(e){var t=e.meterCount,n=e.post,r=(0,re.v9)((function(e){return e.config.productName})),o=function(e){switch(e){case 3:return"metered_view_3";case 2:return"metered_view_2";case 1:default:return"smart_meter"}}(t),i=(0,w.Av)(),l="lo-highlight-meter-".concat(t);a.useEffect((function(){i.event("meter.viewed",{uiType:ne.j.LOHighlightCTA,postId:n.id,meterCount:t})}),[]);var s=a.createElement(se.R9,{linkStyle:"OBVIOUS",inline:!0,operation:"register",susiEntry:o},"Sign up for ".concat(r," and get an extra one"));return a.createElement(A.cW,{source:{postId:n.id}},a.createElement(Z,{featureString:l,text:ue(t),link:s,showTrialMeter:!1}))},me=(0,i.Ps)(ce()),de=n(93125),fe=n(7785),ge=n(11348),ve=n(31235),Ee=n(172);function he(){var e=o()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return he=function(){return e},e}function xe(){var e=o()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIHighlightMeter_post\n    ...LOHighlightMeter_post\n    ...SusiContainer_post\n  }\n  ","\n  ","\n  ","\n"]);return xe=function(){return e},e}var ye=function(e){var t=e.meteringInfo,n=e.post,r=e.viewer,o=a.useState(!1),i=c()(o,2),l=i[0],s=i[1],u=t.maxUnlockCount||3,p=t.postIds.length;return p<=u?(0,ge.sy)()&&(0,de.Dk)(r)?((0,ge.Of)(),null):(l||s(!0),a.createElement(ae,{meterCount:p,post:n,meterLimit:u})):null},be=function(e){var t=e.meterCount,n=e.post,r=a.useState(!1),o=c()(r,2),i=o[0],l=o[1];switch(t){case 1:case 2:case 3:return i||l(!0),a.createElement(pe,{meterCount:t,post:n});default:return null}},we=function(e){var t=e.meteringInfo,n=e.post,r=(0,l.I0)(),o=(0,f.I)(),i=(0,ve.xg)(),s=a.useState(!1),u=c()(s,2),p=u[0],m=u[1];a.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":X()(document))&&m(!0),r((0,Ee.Dl)(!1))}),[]);var d=(0,te.H)(),g=d.loading,v=d.error,E=d.value;if(g||v)return a.createElement(a.Fragment,null);var h=E&&E.mediumMemberAt||void 0,x=n&&n.creator&&n.creator.id||void 0,y=E&&E.id||void 0,b=E?h||x===y:"LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,w=!p||!n.isLocked||!t.postIds.includes(n.id)||b,I=p&&!w,P={height:I?"80px":"0px",overflow:I?"inherit":"hidden",transition:"height 2s cubic-bezier(0.23, 1, 0.32, 1) 0s"},S=E?a.createElement(ye,{meteringInfo:t,post:n,viewer:E}):a.createElement(be,{meterCount:t.postIds.length,post:n});return a.createElement("div",{className:i?o(P):void 0},!w&&S)},Ie=(0,i.Ps)(xe(),le,me,fe.qt),Pe=(0,i.Ps)(he()),Se=n(82318);function Oe(){var e=o()(["\n  fragment NewsletterV3PostHeaderCTA_collection on Collection {\n    id\n    domain\n    slug\n    name\n    newsletterV3 {\n      id\n      slug\n      name\n    }\n  }\n"]);return Oe=function(){return e},e}var Ce=(0,i.Ps)(Oe()),ke=function(e){var t=e.collection,n=(0,re.v9)((function(e){return e.config.authDomain})),r=t.newsletterV3||{id:"",slug:"",name:""},o=(0,oe.iBn)(r.slug,n,t),i=function(){return a.createElement(Se.r,{inline:!0,linkStyle:"OBVIOUS",href:o},r.name)};return a.createElement(a.Fragment,null,a.createElement(J.I,null,t.newsletterV3?a.createElement(a.Fragment,null,"This is an email from ",a.createElement(i,null),", a newsletter by ",t.name,"."):a.createElement(a.Fragment,null,"This is an email from ",t.name,".")))},Le=n(78415),_e=n(46829),Te=n(5977),De=n(3149),Re=n(51064),Ae=function(e){var t=e.children,n=e.onHide,r=void 0===n?function(){}:n,o=(0,Re.O)(!0),i=c()(o,3),l=i[0],s=i[2],u=a.useCallback((function(){s(),r()}),[r]);return l?a.createElement(m.x,{border:"BASE_LIGHT",borderRadius:"4px",padding:"16px 8px 16px 28px",display:"flex",justifyContent:"space-between",alignItems:"center"},a.createElement(d.F,{scale:"L",color:"DARKER"},t),a.createElement(De.P,{onClick:u,isPositionAbsolute:!1,size:"REGULAR"})):null},Ne=n(8403),Me=n(11642);function je(){var e=o()(["\n  query PostNoteMissingNotificationQuery($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    post(id: $postId) {\n      id\n      privateNotes {\n        id\n      }\n      content(postMeteringOptions: $postMeteringOptions) {\n        bodyModel {\n          paragraphs {\n            name\n          }\n        }\n      }\n    }\n  }\n"]);return je=function(){return e},e}function Ue(){var e=o()(["\n  fragment PostNoteMissingNotification_post on Post {\n    id\n  }\n"]);return Ue=function(){return e},e}var Be=function(e){var t,n,r,o,i,l=e.post,s=(0,re.v9)((function(e){return e.navigation.referrer})),u=(0,Te.TH)().hash,p=(0,Ne.G1)(),d=(0,Ne.PM)(),f=(0,_e.useLazyQuery)(He,{variables:{postId:null==l?void 0:l.id,postMeteringOptions:{referrer:s,sk:p,source:d}},ssr:!1}),g=c()(f,2),v=g[0],E=g[1],h=E.called,x=E.loading,y=E.error,b=E.data,w=null==u||null===(t=u.replace("#",""))||void 0===t?void 0:t.split("-"),I=c()(w,2),P=I[0],S=I[1],O=(null!=b?b:{}).post,C=null==O||null===(n=O.privateNotes)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.id)===S})),k=null!==(r=null==O||null===(o=O.content)||void 0===o||null===(i=o.bodyModel)||void 0===i?void 0:i.paragraphs)&&void 0!==r?r:[],L=new Set(k.map((function(e){return e.name})).filter(Me.b)),_=!!C&&L.has(P),T=(0,Re.O)(!!S&&!_),D=c()(T,3),R=D[0],A=D[1],N=D[2];return a.useEffect((function(){S&&!_?A():N()}),[_]),!h&&S&&v(),x||y||!R?null:a.createElement(m.x,{marginTop:"64px"},a.createElement(Ae,{onHide:N},"The note you're looking for was deleted"))},Fe=(0,i.Ps)(Ue()),He=(0,i.Ps)(je()),Ke=n(68387);function Ve(){var e=o()(["\n  fragment PostHeader_meteringInfo on MeteringInfo {\n    ...MeterController_meteringInfo\n  }\n  ","\n"]);return Ve=function(){return e},e}function Ge(){var e=o()(["\n  fragment PostHeader_post on Post {\n    inResponseToPostResult {\n      ... on PostResult {\n        ...InResponseToPostPreview_postResult\n      }\n    }\n    topics {\n      name\n    }\n    creator {\n      ...EntityDrivenSubscriptionCallToAction_creator\n    }\n    tags {\n      id\n    }\n    collection {\n      ...NewsletterV3PostHeaderCTA_collection\n    }\n    layerCake\n    isLocked\n    id\n    firstPublishedAt\n    isNewsletter\n    ...InResponseToPostPreview_mediaResource\n    ...MeterController_post\n    ...PostNoteMissingNotification_post\n    ...AudioPlayback_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Ge=function(){return e},e}var We=(0,l.$j)((function(e){return{isAmp:e.config.isAmp}}))((function(e){var t=e.meteringInfo,n=e.post,r=e.isAmp;return a.createElement(R.M,{columns:8},a.createElement(Be,{post:n}),n.isNewsletter&&!!n.collection&&a.createElement(ke,{collection:n.collection}),!n.collection&&n.creator&&!n.isLocked&&a.createElement(A.cW,{source:{name:Ke.Qw,postId:n.id}},a.createElement(Ke.Qj,{creator:n.creator,position:"top"})),!!n.isLocked&&!!t&&a.createElement(we,{meteringInfo:t,post:n}),n.audioVersionUrl&&!r&&a.createElement(W,{post:n}))})),ze=(0,i.Ps)(Ge(),Le.zJ,Le.KI,Ie,Fe,z,Ce,Ke.w7),$e=(0,i.Ps)(Ve(),Pe)},82423:(e,t,n)=>{"use strict";n.d(t,{F:()=>C,R:()=>k});var r=n(28655),o=n.n(r),i=n(63038),a=n.n(i),l=n(71439),s=n(67294),c=n(86156),u=n(86753),p=n(47713),m=n(7883),d=n(11146),f=n(1506),g=n(74871),v=n(21356),E=n(71542),h=n(33819),x=n(53976),y=n(14071),b=n(62181),w=n(85677),I=n(42933),P=n(51512),S=n(51064);function O(){var e=o()(["\n  fragment PostFooterActionsBar_post on Post {\n    id\n    visibility\n    isPublished\n    allowResponses\n    creator {\n      id\n    }\n    collection {\n      id\n    }\n    ...BookmarkButton_post\n    ...MultiVote_post\n    ...SusiClickable_post\n    ...ManageSubmission_post\n    ...CollectionSubmission_post\n    ...SharePostButtons_post\n    ...ResponsesIconButton_post\n    ...CreatorActionOverflowPopover_post\n    ...PostFooterSocialPopover_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return O=function(){return e},e}var C=function(e){var t,n=e.post,r=e.useSocialPopover,o=e.shouldHideClapsText,i=void 0!==o&&o,l=e.withCatalogsTooltip,u=void 0!==l&&l,f=s.useContext(c.f).openSidebar,g=n.isPublished,b=n.creator,O=n.collection,C="clap_footer",k={post:n,source:{name:"post_actions_footer"}},L=(0,S.O)(!1),_=a()(L,2),T=_[0],D=_[1],R=(0,x.VB)({name:"enable_updated_three_dot_menu",placeholder:!1}),A=(null==n||null===(t=n.postResponses)||void 0===t?void 0:t.count)||null;return s.createElement(s.Fragment,null,T&&s.createElement(w.T,null),s.createElement(I.x,{display:"flex",justifyContent:"space-between",marginTop:"25px",print:{display:"none"}},s.createElement(P.cW,{source:{name:"post_actions_footer"}},s.createElement(I.x,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(I.x,{maxWidth:"155px"},s.createElement(E.e,null,s.createElement(v.S,{post:n,buttonStyle:"SUBTLE",hasDialog:!0,shouldShowResponsiveLabelText:!0,shouldHideClapsText:i,susiEntry:C})),s.createElement(E.s,null,s.createElement(v.S,{post:n,buttonStyle:"SUBTLE",hasDialog:!0,shouldHideClapsText:i,susiEntry:C}))),s.createElement(P.cW,{source:{name:"follow_footer",susiEntry:"follow_footer"}},s.createElement(I.x,{marginLeft:"24px"},s.createElement(h.h,{postId:n.id,responsesCount:A,allowResponses:n.allowResponses,isLimitedState:n.isLimitedState,handleClick:f||function(){},responsesCountColor:"DARKER",iconStylesOverride:{marginTop:"4px"},countStylesOverride:{marginLeft:"4px",marginTop:"5px"}}))))),s.createElement(I.x,{display:"flex",alignItems:"center"},g&&s.createElement(s.Fragment,null,r?s.createElement(I.x,{paddingRight:"8px"},s.createElement(d.$,k)):s.createElement(y.U,k),s.createElement(I.x,{flexGrow:"0",paddingRight:"8px"},s.createElement(P.cW,{source:{name:"post_actions_footer"}},s.createElement(p.o,{post:n,susiEntry:"bookmark_footer",withCatalogsTooltip:u})))),n&&b&&s.createElement(m.Z,{creator:b,post:n,collection:O,showLoadingIndicator:D,isDismissDisabled:!!R}))))},k=(0,l.Ps)(O(),u.z,v.x,b.qU,g.En,f.x7,y.E,h.K,m.G,d.u)},68387:(e,t,n)=>{"use strict";n.d(t,{Qw:()=>C,Qj:()=>k,w7:()=>L});var r=n(28655),o=n.n(r),i=n(67154),a=n.n(i),l=n(59713),s=n.n(l),c=n(71439),u=n(67294),p=n(32149),m=n(76532),d=n(32589),f=n(62181),g=n(42933),v=n(55099),E=n(37278),h=n(98024),x=n(95760),y=n(6688),b=n(85277),w=n(67297),I=n(82482),P=n(96879),S=n(27952);function O(){var e=o()(["\n  fragment EntityDrivenSubscriptionCallToAction_creator on User {\n    __typename\n    id\n    name\n    ...useShouldShowEntityDrivenSubscription_creator\n  }\n  ","\n"]);return O=function(){return e},e}var C="entity_driven_subscription",k=function(e){var t,n,r,o,i,l=e.creator,c=e.position,O=void 0===c?"bottom":c,C=(0,b.w)(),k=(0,x.Av)(),L=(0,y.I)(),_=(0,d.P)(null==l?void 0:l.id).viewerEdge,T=(0,w.v9)((function(e){return e.config.authDomain})),D=(0,w.v9)((function(e){return e.config.productName})),R=(0,m.H)().value,A=null!==(t=null==_?void 0:_.isAllowEdsEnabled)&&void 0!==t&&t,N=null!==(n=null==R?void 0:R.mediumMemberAt)&&void 0!==n&&n,M=null!==(r=null==_?void 0:_.isUser)&&void 0!==r&&r,j=(0,p.$)("entity_driven_subscription_milestone_1",l),U=M&&A&&N,B=null!==(o=null==l?void 0:l.name)&&void 0!==o?o:"",F=null!==(i=null==l?void 0:l.id)&&void 0!==i?i:"",H=u.useCallback((function(){k.event("entityDrivenSubCallToAction.clicked",{userId:null==R?void 0:R.id,entityId:null==l?void 0:l.id}),U&&C({message:"You're already a ".concat(D," member."),toastStyle:"MESSAGE"})}),[l,R,T,U]);u.useEffect((function(){A&&k.event("experiment.eligible",{experimentId:"65da28af5652"})}),[A]);var K=(0,P.Rk)((0,S.c5p)(T),{subscribeToUserId:F});return j?u.createElement("div",{className:L((function(e){var t;return t={borderTop:"4px solid ".concat(e.accentColor.border.normal),backgroundColor:e.baseColor.background.light},s()(t,I.xl(e),{padding:"38px",marginTop:"40px",marginBottom:"top"===O?"13px":"40px"}),s()(t,I.lg(e),{padding:"38px",marginTop:"40px",marginBottom:"top"===O?"13px":"40px"}),s()(t,I.md(e),{padding:"38px",marginTop:"32px",marginBottom:"top"===O?"5px":"40px"}),s()(t,I.sm(e),{padding:"24px 24px 28px 24px",marginTop:"32px",marginBottom:"top"===O?"5px":"40px"}),s()(t,I.xs(e),{padding:"24px 24px 28px 24px",marginTop:"32px",marginBottom:"top"===O?"5px":"40px"}),t}))},u.createElement(g.x,null,u.createElement(E.X6,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},"Read everything from ",B," — and more.")),u.createElement(g.x,{paddingTop:"10px",paddingBottom:"30px"},u.createElement(h.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Upgrade to Medium membership to directly support independent writers and get unlimited access to everything on Medium.")),u.createElement(g.x,{display:"flex",flexDirection:"row"},u.createElement(v.z,a()({onClick:H,buttonStyle:"STRONG"},N?void 0:{href:K}),"Become a member"),!R&&u.createElement(u.Fragment,null,u.createElement(h.F,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"},color:"DARKER"},u.createElement(g.x,{marginLeft:"12px",display:"flex",flexDirection:"column"},"Already a member?",u.createElement(f.R9,{operation:"login",linkStyle:"OBVIOUS",inline:!0,susiEntry:"entity_driven_subscription_cta"},"Sign In")))))):null},L=(0,c.Ps)(O(),p.G)},93125:(e,t,n)=>{"use strict";n.d(t,{_U:()=>M,Dk:()=>j});var r=n(28655),o=n.n(r),i=n(59713),a=n.n(i),l=n(63038),s=n.n(l),c=n(46829),u=n(71439),p=n(67294),m=n(12291),d=n(27721),f=n(42933),g=n(98462),v=n(98024),E=n(86021),h=n(6688),x=n(90038),y=n(27952);function b(){var e=o()(["\n  fragment ReadNextPostCard_post on Post {\n    id\n    title\n    mediumUrl\n    primaryTopic {\n      name\n      slug\n    }\n    collection {\n      id\n      name\n    }\n    previewImage {\n      id\n      alt\n      focusPercentX\n      focusPercentY\n    }\n  }\n"]);return b=function(){return e},e}var w=(0,u.Ps)(b()),I=(0,m.$j)((function(e){return{mediumOwnedAndOperatedCollectionIds:e.config.mediumOwnedAndOperatedCollectionIds,isCustomDomain:e.client.isCustomDomain}}))((function(e){var t=e.isCustomDomain,n=e.mediumOwnedAndOperatedCollectionIds,r=e.post,o=r&&r.previewImage||{},i=o.focusPercentX,a=o.focusPercentY,l=o.id,s=o.alt,c=r.collection||{},u=c.name,m=c.id,b=r.primaryTopic&&r.primaryTopic.name,w=m&&(n.includes(m)?u:b)||"",I=r&&r.title||"",P=(0,y.jVf)(r,t),S=(0,h.I)(),O=p.createElement(f.x,{marginBottom:"4px"},p.createElement(E.Lh,{tag:"span"},p.createElement(v.F,{scale:"S",color:"DARKER"},p.createElement("div",{className:S({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})},w))));return p.createElement(g.P,{href:P},p.createElement(f.x,{display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"20px"},O,p.createElement(f.x,{display:"flex",flexDirection:"row"},p.createElement(d.UV,{miroId:l||"",alt:s||"",height:50,width:50,freezeGifs:!0,strategy:x._S.Crop,rules:{marginRight:"9px",marginTop:"4px"},focusPercentX:i||50,focusPercentY:a||50}),p.createElement(f.x,{display:"flex",flexDirection:"column",width:"130px"},p.createElement(v.F,{scale:"S",color:"DARKER",clamp:3},I)))))})),P=n(76532),S=n(3149),O=n(17614),C=n(95760),k=n(51512),L=n(11348),_=n(6522);function T(){var e=o()(["\n  query ReadNextQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      readNext {\n        ... on ReadNextItem {\n          reason\n          post {\n            ... on Post {\n              ...ReadNextPostCard_post\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={display:"none"},N={":last-of-type":{xs:A,sm:A,md:A,lg:A,xl:{display:"block"}}},M=function(e){var t=e.isVisible,n=void 0===t||t,r=e.postId,o=p.useState(!1),i=s()(o,2),a=i[0],l=i[1],u=(0,P.H)().value,m=(0,c.useLazyQuery)(U),d=s()(m,2),g=d[0],v=d[1],E=v.called,x=v.loading,y=v.error,b=v.data,w=(b=void 0===b?{post:void 0}:b).post,_=u&&j(u)&&!((0,L.yd)()||a),T=(0,C.Av)(),D=(0,h.I)(),A=(0,k.Lk)(),M=w&&w.readNext;return p.useEffect((function(){x||!y||M&&M.length||T.event("readNextError",{post:w,postId:r,error:y,readNextLength:M&&M.length||0})}),[x]),p.useEffect((function(){n&&M&&(T.event("readNext.viewed",{position:"sidebar"}),M.slice(0,4).map((function(e,t){var n=e.post,r=e.reason;return T.event("post.clientPresented",{source:(0,k.f0)(R(R({},A),{},{index:t,postFeedReason:r||void 0})),location:"post/".concat(n&&n.id)}),!0})))}),[n,M]),!E&&_&&g({variables:{postId:r||""}}),E&&!x&&!y&&w&&M&&M.length&&_?p.createElement(k.cW,{source:{name:"read_next",sectionType:k.bA.READ_NEXT_SIDEBAR},extendSource:!0},p.createElement(f.x,{width:"188px"},p.createElement(f.x,{md:{display:"none"},lg:{width:"780px",margin:"0 24px"},position:"relative",backgroundColor:"BACKGROUND",paddingBottom:"24px",paddingTop:"24px",width:"100%"},p.createElement(f.x,{position:"absolute",right:"0",top:"-4px"},p.createElement(S.P,{onClick:function(){(0,L.Ph)(),l(!0)},size:"SMALL",isPositionAbsolute:!1})),p.createElement(f.x,{width:"200px"},p.createElement(O.F1,{scale:"XS"},"Your journey starts here.")),p.createElement(f.x,{display:"flex",flexDirection:"column",justifyContent:"space-between"},w.readNext.slice(0,4).map((function(e,t){var n=e.post;return n?p.createElement("div",{className:D(N),key:t},p.createElement(I,{key:t,post:n})):null})))))):null};function j(e){return e&&e.createdAt+_.pU>Date.now()}var U=(0,u.Ps)(T(),w)},14071:(e,t,n)=>{"use strict";n.d(t,{E:()=>p,U:()=>m});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),l=n(32272),s=n(42933),c=n(51512);function u(){var e=o()(["\n  fragment SharePostButtons_post on Post {\n    id\n    isLimitedState\n    visibility\n    ...SharePostButton_post\n  }\n  ","\n"]);return u=function(){return e},e}var p=(0,i.Ps)(u(),l.o);function m(e){var t=e.post,n=e.source,r="UNLISTED"===t.visibility;return a.createElement(c.cW,{source:n},a.createElement(s.x,{flexGrow:"0",paddingRight:"6px"},!r&&a.createElement(l.f,{socialPlatform:"TWITTER",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})),a.createElement(s.x,{flexGrow:"0",paddingRight:"6px"},!r&&a.createElement(l.f,{socialPlatform:"LINKEDIN",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})),a.createElement(s.x,{flexGrow:"0",paddingRight:"6px"},!r&&a.createElement(l.f,{socialPlatform:"FACEBOOK",buttonStyle:t.isLimitedState?"LINK_DISABLED":"LINK",post:t})))}},18839:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n(67294),o=n(70405),i=n(12291),a=n(68254),l=n.n(a),s=(0,i.$j)((function(e){return{isCustomDomain:e.client.isCustomDomain}}))((function(e){var t=e.isCustomDomain,n=e.isHomePage,i=e.imageUrl,a=e.card,s=void 0===a?i?"summary_large_image":"summary":a,c=e.title,u=e.description,p=e.seoTitle,m=e.seoDescription,d=e.pageUrl,f=e.publicationName,g=e.publicationTwitterHandle,v=void 0===g?"@Medium":g,E=e.creatorTwitterHandle,h=void 0===E?v:E,x=e.pageType,y={"@context":"http://schema.org","@type":"Organization",url:"https://medium.com",name:"Medium",description:m||u,publishingPrinciples:"https://policy.medium.com/medium-terms-of-service-9db0094a1e0f",logo:{"@type":"ImageObject",url:"https://miro.medium.com/max/968/1*F6SrJR7_s95r6oCF3ugMZw.png",width:484,height:168}};return r.createElement(o.q,null,r.createElement("title",null,p||c),r.createElement("meta",{name:"title",content:p||c}),m||u?r.createElement("meta",{name:"description",content:m||u}):null,!t&&n&&r.createElement(r.Fragment,null,r.createElement("script",{type:"application/ld+json"},l()(y,{isJSON:!0})),r.createElement("link",{rel:"canonical",href:d})),r.createElement("meta",{name:"twitter:card",content:s}),r.createElement("meta",{name:"twitter:creator",content:h}),u?r.createElement("meta",{name:"twitter:description",content:u}):null,i?r.createElement("meta",{name:"twitter:image:src",content:i}):null,r.createElement("meta",{name:"twitter:site",content:v}),r.createElement("meta",{name:"twitter:title",content:c}),u?r.createElement("meta",{property:"og:description",content:u}):null,i?r.createElement("meta",{property:"og:image",content:i}):null,r.createElement("meta",{property:"og:site_name",content:f}),r.createElement("meta",{property:"og:title",content:c}),r.createElement("meta",{property:"og:type",content:x}),r.createElement("meta",{property:"og:url",content:d}))}))},79208:(e,t,n)=>{"use strict";n.d(t,{Dm:()=>r,JA:()=>y});var r,o=n(63038),i=n.n(o),a=n(87757),l=n.n(a),s=n(48926),c=n.n(s),u=n(94301),p=n.n(u),m=n(67294),d=n(61250);!function(e){e[e.NONE=0]="NONE",e[e.STARTING=1]="STARTING",e[e.UPLOADING=2]="UPLOADING",e[e.UPLOADED=3]="UPLOADED"}(r||(r={}));var f=new Set(["jpg","jpeg","png","gif"]),g=function(e){return new Promise((function(t){return setTimeout(t,e)}))},v=function(){var e=c()(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()(t,{credentials:"same-origin",method:"POST",headers:{accept:"application/json","Content-Type":"application/json","x-xsrf-token":"1","X-Obvious-CID":"web"},body:JSON.stringify({url:n})});case 2:return r=e.sent,e.next=5,r.text();case 5:return o=e.sent,e.abrupt("return",JSON.parse(o.replace("])}while(1);</x>","")));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=c()(l().mark((function e(t,n){var r,o,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("uploadedFile",n),e.next=4,p()(t,{credentials:"same-origin",method:"POST",headers:{"x-xsrf-token":"1","X-Obvious-CID":"web"},body:r});case 4:return o=e.sent,e.next=7,o.text();case 7:return i=e.sent,e.abrupt("return",JSON.parse(i.replace("])}while(1);</x>","")));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h="CreateUpload",x=new Error("Image upload failed. The URL you provided may be invalid."),y=function(e,t,n){var o=m.useState(r.NONE),a=i()(o,2),s=a[0],u=a[1],p=m.useRef(null),y=m.useCallback((function(){p.current&&p.current.click()}),[p.current]),b=(0,d.BS)(h),w=(0,d.BS)("CreateUploadUrl");function I(){return P.apply(this,arguments)}function P(){return(P=c()(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(r.STARTING),e.next=3,g(0);case 3:u(r.UPLOADING);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=c()(l().mark((function n(o){var i,a,s,c,p;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I();case 2:if(n.prev=2,w){n.next=5;break}throw new Error("Expected ".concat(h," route to exist"));case 5:return n.next=7,v(w.pathPattern,o);case 7:a=n.sent,s=a.success,c=a.payload,s&&null!=c&&null!==(i=c.value)&&void 0!==i&&i.fileId?((p=new Image).onload=function(){u(r.UPLOADED),e(c,{url:o,height:p.height,width:p.width},(function(){return u(r.NONE)}))},p.onerror=function(){t(x)},p.src=o):t(x),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),t(n.t0);case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))).apply(this,arguments)}function O(e){return C.apply(this,arguments)}function C(){return(C=c()(l().mark((function o(i){var a,s,c,p,m,d,g,v;return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=null==i?void 0:i[0]){o.next=3;break}return o.abrupt("return");case 3:if(s=a.name.split(".").pop(),f.has((null==s?void 0:s.toLowerCase())||"")){o.next=7;break}return n&&n(),o.abrupt("return");case 7:return o.next=9,I();case 9:if(o.prev=9,b){o.next=12;break}throw new Error("Expected ".concat(h," route to exist"));case 12:return o.next=14,E(b.pathPattern,a);case 14:p=o.sent,m=p.success,d=p.payload,m&&null!=d&&null!==(c=d.value)&&void 0!==c&&c.md5&&(g=URL.createObjectURL(a),(v=new Image).onload=function(){u(r.UPLOADED),e(d,{file:a,height:v.height,width:v.width},(function(){return u(r.NONE)}))},v.src=g),o.next=22;break;case 19:o.prev=19,o.t0=o.catch(9),t(o.t0);case 22:case"end":return o.stop()}}),o,null,[[9,19]])})))).apply(this,arguments)}function k(){O(this.files),this.value=""}return m.useEffect((function(){if(p.current)return p.current.addEventListener("change",k),function(){p.current&&p.current.removeEventListener("change",k)}}),[p.current]),{inputRef:p,fireClick:y,status:s,handleDropEvent:function(e){var t=e.dataTransfer;t&&O(t.files)},uploadUrl:function(e){return S.apply(this,arguments)}}}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6375.87205f81.chunk.js.map