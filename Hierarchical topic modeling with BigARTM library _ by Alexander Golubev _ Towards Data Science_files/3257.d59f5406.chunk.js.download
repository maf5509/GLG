(self.webpackChunklite=self.webpackChunklite||[]).push([[3257],{71254:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var r=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var o=r.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z",fillRule:"evenodd"});const i=function(e){return r.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25"},e),o)}},6106:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i});var r=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var o=r.createElement("path",{d:"M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13c.2.18.52.17.71-.03a.5.5 0 0 0 .12-.29H19V6z"});const i=function(e){return r.createElement("svg",a({width:25,height:25,viewBox:"0 0 25 25"},e),o)}},3257:(e,n,t)=>{"use strict";t.d(n,{aR:()=>ae,Gm:()=>oe,_C:()=>ie});var r=t(28655),a=t.n(r),o=t(67154),i=t.n(o),l=t(63038),d=t.n(l),c=t(71439),s=t(67294),g=t(59713),u=t.n(g),f=t(319),p=t.n(f),v=t(46829),m=t(16084),C=t(42933),h=t(82318),b=t(98024),I=t(6688),E=t(85277),P=t(73976);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w={maxHeight:"240px",overflowY:"auto"};function T(e){var n,t,r,a=e.target,o=e.kind,i=e.showCreateModal,l=e.hidePanel,d=e.viewer,c=s.useRef(null),g=(0,I.I)(),u=(0,m.dw)({limit:m.W,userId:d.id}),f=(0,E.w)(),O=(0,v.useQuery)(m.Dk,{variables:u}),T=O.data,j=O.error,k=O.loading,_=O.fetchMore;s.useEffect((function(){j&&f({message:"",toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[j]);var A,V=s.useCallback((function(){i(),l()}),[i,l]),x=null==T?void 0:T.catalogsByUser.catalogs;return x&&"Catalog"===(null==T||null===(n=T.readingList)||void 0===n?void 0:n.__typename)&&(x=[T.readingList].concat(p()(x))),null!=T&&null!==(t=T.catalogsByUser)&&void 0!==t&&null!==(r=t.paging)&&void 0!==r&&r.nextPageCursor&&(A=function(){return _({variables:y(y({},u),{},{pagingOptions:y(y({},u.pagingOptions),{},{cursor:{id:T.catalogsByUser.paging.nextPageCursor.id}})})})}),s.createElement(C.x,{width:"300px"},s.createElement(C.x,{padding:"24px 20px 16px 24px"},s.createElement("div",{className:g(w),ref:c},s.createElement(P.n,{target:a,kind:o,viewer:d,catalogs:x,isLoading:k,fetchMore:A,scrollableEl:c.current}))),!k&&s.createElement(C.x,{borderTop:"BASE_LIGHTER",padding:"20px 24px 24px"},s.createElement(b.F,{color:"ACCENT",scale:"L"},s.createElement(h.r,{onClick:V},"Create new list"))))}var j=t(24821),k=t(80122),_=t(50361),A=t.n(_),V=t(46282),x=t(57768),S=t(14391),B=t(6304),D=t(94945);function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(){var e=a()(["\n  fragment useAddItemToPredefinedCatalog_postViewerEdge on PostViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return M=function(){return e},e}function H(){var e=a()(["\n  fragment useAddItemToPredefinedCatalog_bookEditionViewerEdge on BookEditionViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return H=function(){return e},e}function N(){var e=a()(["\n  mutation AddToPredefinedCatalog(\n    $type: PredefinedCatalogType!\n    $operation: PredefinedCatalogAddOperationInput!\n  ) {\n    addToPredefinedCatalog(type: $type, operation: $operation) {\n      __typename\n      ... on AddToPredefinedCatalogSucces {\n        version\n        insertedItem {\n          __typename\n          catalogItemId\n          catalogId\n        }\n      }\n    }\n  }\n"]);return N=function(){return e},e}var F="temp-catalog-id",G=(0,c.Ps)(N()),U=(0,c.Ps)(H()),W=(0,c.Ps)(M()),Z=t(80362),$=t(19464),z=t(51064),Q=t(71254),Y=t(6106),J=function(e){return{color:e.baseColor.border.dark,fill:e.baseColor.fill.lighter,"&:hover":{color:e.baseColor.border.darker,fill:e.baseColor.fill.normal}}},K=function(e){return{color:e.baseColor.border.darker,fill:e.baseColor.fill.normal}},q=function(){var e=(0,I.I)();return s.createElement(Q.Z,{className:e(J)})},X=function(){var e=(0,I.I)();return s.createElement(Y.Z,{className:e(K)})};function ee(e){var n=e.insideACatalog,t=e.insideAPredefined;return n||t?s.createElement(X,null):s.createElement(q,null)}function ne(){var e=a()(["\n  fragment AddToCatalogBase_post on Post {\n    id\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n          catalogItemIds\n        }\n        predefinedContainingThis {\n          catalogId\n          predefined\n          catalogItemIds\n        }\n      }\n      ...editCatalogItemsMutation_postViewerEdge\n      ...useAddItemToPredefinedCatalog_postViewerEdge\n    }\n    ...WithToggleInsideCatalog_post\n  }\n  ","\n  ","\n  ","\n"]);return ne=function(){return e},e}function te(){var e=a()(["\n  fragment AddToCatalogBase_bookEdition on BookEdition {\n    id\n    viewerEdge {\n      catalogsConnection {\n        catalogsContainingThis(type: LISTS) {\n          catalogId\n        }\n        predefinedContainingThis {\n          predefined\n        }\n      }\n      ...editCatalogItemsMutation_bookEditionViewerEdge\n      ...useAddItemToPredefinedCatalog_bookEditionViewerEdge\n    }\n    ...WithToggleInsideCatalog_bookEdition\n  }\n  ","\n  ","\n  ","\n"]);return te=function(){return e},e}function re(e){var n=e.children,t=e.isPanelVisible,r=e.hidePanel,a=e.togglePanel,o=e.target,i=e.kind,l=e.viewer,c=(0,z.O)(!1),g=d()(c,3),u=g[0],f=g[1],p=g[2],m=function(e,n,t,r){var a=(0,v.useMutation)(G,{variables:{type:n,operation:{preprend:{type:r,id:t}}},optimisticResponse:{addToPredefinedCatalog:{__typename:"AddToPredefinedCatalogSucces",version:x.xt,insertedItem:{__typename:"CatalogItemV2",catalogId:F,catalogItemId:x.PH}}},update:function(a,o){var i,l=null===(i=o.data)||void 0===i?void 0:i.addToPredefinedCatalog;if("AddToPredefinedCatalogSucces"===(null==l?void 0:l.__typename)){var d,c,s=l.insertedItem,g=l.version;if(s.catalogId!==F&&(0,V.UV)(a,s.catalogId,g),r===S.ej.BOOK_EDITION)d="BookEditionViewerEdge:".concat((0,B.j)(t,e)),c=U;else{if(r!==S.ej.POST)return;d="PostViewerEdge:".concat((0,D.Q)(t,e)),c=W}var u=a.readFragment({id:d,fragment:c});if(null!=u&&u.catalogsConnection){var f=A()(u.catalogsConnection.predefinedContainingThis),p=f.findIndex((function(e){return e.predefined===n}));if(-1!==p)f[p].catalogItemIds.push(s.catalogItemId);else{var v={catalogId:s.catalogId,predefined:n,version:g,catalogItemIds:[s.catalogItemId]};f.push(v)}a.writeFragment({id:d,fragment:c,data:L(L({},u),{},{catalogsConnection:L(L({},u.catalogsConnection),{},{predefinedContainingThis:f})})})}}}});return d()(a,1)[0]}(l.id,S.l8.READING_LIST,o.id,i),C=o.viewerEdge.catalogsConnection,h=(null==C?void 0:C.predefinedContainingThis)&&C.predefinedContainingThis.length>0,b=(null==C?void 0:C.catalogsContainingThis)&&C.catalogsContainingThis.length>0,I=s.useMemo((function(){var e;return!!(null==C||null===(e=C.predefinedContainingThis)||void 0===e?void 0:e.find((function(e){return e.predefined===S.l8.READING_LIST})))}),[C]),E=s.useCallback((function(){a(),I||b||m()}),[a,b,I,m]),P=s.createElement(ee,{insideACatalog:!!b,insideAPredefined:!!h});return s.createElement(Z.J,{isVisible:t,popoverRenderFn:function(){return s.createElement(T,{showCreateModal:f,hidePanel:r,target:o,kind:i,viewer:l})},hide:r,targetDistance:15,referenceWidth:"100%"},s.createElement(k.a,{isVisible:u,hide:p,target:o,kind:i,viewer:l}),n({onClick:E,bookmarkIcon:P,isCataloged:!!b||!!h,isPanelVisible:t}))}function ae(e){return s.createElement($.B,null,(function(n){var t=n.isVisible,r=n.toggle,a=n.hide;return s.createElement(re,i()({},e,{isPanelVisible:t,togglePanel:r,hidePanel:a}))}))}var oe=(0,c.Ps)(te(),U,x.T_,j.tA),ie=(0,c.Ps)(ne(),W,x.ST,j.m7)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3257.d59f5406.chunk.js.map