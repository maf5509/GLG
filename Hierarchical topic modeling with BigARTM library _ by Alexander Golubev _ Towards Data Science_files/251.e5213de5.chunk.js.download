(self.webpackChunklite=self.webpackChunklite||[]).push([[251],{14345:(e,t,n)=>{"use strict";n.d(t,{A:()=>Z,r:()=>Y});var r=n(28655),o=n.n(r),l=n(71439),i=n(67294),a=n(67154),u=n.n(a),s=n(63038),c=n.n(s),d=n(12291),p=n(93653),m=n(35848),f=n(53962),v=n(62806),E=n(71245),C=n(965),b=n(78820),h=n(73232),P=n(53976),w=n(76532),y=n(1932),g=n(32262),I=n(57469),x=n(23824),S=n(29169),k=n(92528),O=n(80362),T=n(82318),_=n(66266),V=n(98024),j=n(6688),D=n(14391),R=n(65347),B=n(67297),F=n(93394),A=n(39171),U=n(51064),K=n(55573),M=n(27952);function L(){var e=o()(["\n  fragment TruncatedPostCardEditorWriterButton_post on Post {\n    id\n    collection {\n      id\n      name\n      slug # Needed for rejectPostFromPub (not currently exposed as a reusable fragment)\n    }\n    allowResponses\n    clapCount\n    visibility\n    mediumUrl\n    responseDistribution\n    ...useIsPinnedInContext_post\n    ...CopyFriendLinkMenuItem_post\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}var J=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},N=function(e){var t=e.post,n=e.publisherContext,r=e.isEditor,o=e.isWriter,l=e.creator,a=(0,j.I)(),s=(0,B.v9)((function(e){return e.config.authDomain})),L=t.id,N=t.collection,W=t.responseDistribution,G=t.visibility,H=t.mediumUrl,Q=t.allowResponses,q=(0,P.VB)({name:"enable_updated_three_dot_menu",placeholder:!1}),$=(0,w.H)().value,z=null==$?void 0:$.id,X=null==l?void 0:l.id,Z=(0,y.Tf)(t).viewerEdge,Y=N||{id:"",name:""},ee=Y.id,te=Y.name,ne=(0,U.O)(!1),re=c()(ne,3),oe=re[0],le=re[1],ie=re[2],ae=(0,b.n_)(t,n),ue=c()(ae,2),se=ue[0],ce=ue[1],de=i.useState(""),pe=c()(de,2),me=pe[0],fe=pe[1],ve=i.useCallback((function(){ie(),ce().then((function(e){var t=e.errors;t&&t.length&&t[0].message?fe(t[0].message):window.location.reload()}))}),[ie,ce,fe]),Ee=(0,E.yb)(t),Ce=(0,U.O)(!1),be=c()(Ce,3),he=be[0],Pe=be[1],we=be[2],ye=i.useCallback((function(){Ee(N).then((function(){return window.location.reload()}))}),[ee,Ee]),ge=(0,p.j)(L),Ie=c()(ge,1)[0],xe=(0,U.O)(!1),Se=c()(xe,3),ke=Se[0],Oe=Se[1],Te=Se[2],_e=i.useCallback((function(){Ie().then((function(){return window.location.reload()}))}),[Ie]),Ve=W===D.Et.DISTRIBUTED,je=(0,U.O)(!1),De=c()(je,3),Re=De[0],Be=De[1],Fe=De[2],Ae={buttonStyle:"ERROR",cancelText:"Cancel"},Ue="truncatedPostCardEditorWriterMenu",Ke="Delete story".concat(Ve?" and response":""),Me=Ve?h.Q:"Are you sure you want to delete this story?",Le="LOCKED"===G,Je=!!q&&("User"===n&&o||"Collection"===n&&r),Ne=(0,d.I0)(),We=i.useCallback((function(e){return Ne((0,R.at)(e))}),[Ne]),Ge=(0,B.b$)((function(e){return e.multiVote.clapsPerPost})),He=(0,K.l)(Ge,t,Z),Qe=He.clapCount,qe=He.viewerClapCount,$e=(0,C.CP)();return i.createElement(i.Fragment,null,i.createElement(k.Q,u()({},Ae,{isVisible:he,onConfirm:ye,hide:we,titleText:"Remove story",confirmText:"Remove",isDestructiveAction:!0}),"Are you sure you want to remove this story from ",te,"?"),i.createElement(k.Q,u()({},Ae,{isVisible:ke,onConfirm:_e,hide:Te,titleText:Ke,confirmText:"Delete",isDestructiveAction:!0}),Me),i.createElement(k.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Re,onConfirm:function(){var e=(0,M.d0A)(s,L);window.location.replace(e)},hide:Fe,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},h.t),i.createElement(O.J,{ariaId:Ue,hide:ie,isVisible:oe,popoverRenderFn:function(){return i.createElement(g.mX,null,i.createElement(g.Sl,null,Ve?i.createElement(T.r,{linkStyle:"SUBTLE",onClick:(0,A.B)(ie,Be)},"Edit story"):i.createElement(T.r,{linkStyle:"SUBTLE",href:(0,M.d0A)(s,L)},"Edit story")),(r||o&&"User"===n)&&i.createElement(g.Sl,null,i.createElement(T.r,{onClick:ve},se?"Unpin":"Pin"," story")),i.createElement(g.oK,null),i.createElement(g.Sl,null,i.createElement(T.r,{href:(0,M.KIb)(s,L)},"Story settings")),i.createElement(g.Sl,null,i.createElement(T.r,{href:(0,M.T0G)(s,L)},"Story stats")),q&&Le&&H&&(null==Z?void 0:Z.shareKey)&&i.createElement(f.$,{post:t,shareKey:null==Z?void 0:Z.shareKey}),i.createElement(g.oK,null),Je?i.createElement(v.r,{hidePopover:ie,postId:t.id,allowResponses:Q}):null,ee&&i.createElement(g.Sl,null,i.createElement(T.r,{onClick:Pe},"Remove story from publication")),o&&i.createElement(g.Sl,null,i.createElement(T.r,{onClick:(0,A.B)(ie,Oe)},"Delete story")),q&&r&&!o&&i.createElement(i.Fragment,null,i.createElement(g.oK,null),z&&Qe&&qe&&qe>0?i.createElement(g.Sl,null,i.createElement(T.r,{onClick:function(){return $e(t,(null==$?void 0:$.id)||"",-qe,Z),We({postId:t.id,clapCount:Qe-qe,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void ie()}},"Undo applause for this post")):null,i.createElement(S.z,{targetUserId:X,postId:t.id,hidePopover:ie,viewerId:z}),i.createElement(m.qT,{hidePopover:ie,creator:l}),i.createElement(I.F,{hidePopover:ie,creator:l,viewer:$}),i.createElement(x.j,{hidePopover:ie,creator:l,viewer:$})))}},i.createElement(T.r,{ariaControls:Ue,ariaExpanded:oe?"true":"false",ariaLabel:"More options",onClick:le},i.createElement(F.Z,{className:a(J)}))),i.createElement(_.F,{isVisible:!!me,hide:function(){return fe("")},duration:5e3},i.createElement(V.F,{scale:"M"},me)))},W=(0,l.Ps)(L(),b.xt,f.g,C.JP),G=n(36511);function H(){var e=o()(["\n  fragment TruncatedPostCardReaderButton_post on Post {\n    id\n    collection {\n      id\n    }\n    creator {\n      id\n    }\n    clapCount\n    ...ClapMutation_post\n  }\n  ","\n"]);return H=function(){return e},e}var Q=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}},q=function(e){var t=e.post,n=e.viewer,r=(0,j.I)(),o=t.creator,l=t.collection,a=null==o?void 0:o.id,u=null==l?void 0:l.id,s=(0,U.O)(!1),p=c()(s,3),f=p[0],v=p[1],E=p[2],b="truncatedPostCardReaderMenu",h=(0,G.r)().viewerId,w=(0,y.Tf)(t).viewerEdge,k=(0,d.I0)(),_=i.useCallback((function(e){return k((0,R.at)(e))}),[k]),V=(0,B.b$)((function(e){return e.multiVote.clapsPerPost})),D=(0,K.l)(V,t,w),A=D.clapCount,M=D.viewerClapCount,L=(0,C.CP)(),J=(0,P.VB)({name:"enable_updated_three_dot_menu",placeholder:!1});if(J){if(!a)return null}else if(!u||!a)return null;var N=J?h&&A&&M&&M>0:null;return i.createElement(O.J,{ariaId:b,hide:E,isVisible:f,popoverRenderFn:function(){return i.createElement(g.mX,null,!!N&&i.createElement(g.Sl,null,i.createElement(T.r,{onClick:function(){return L(t,(null==n?void 0:n.id)||"",-M,w),_({postId:t.id,clapCount:A-M,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),void E()}},"Undo applause for this post")),i.createElement(S.z,{targetUserId:a,postId:t.id,hidePopover:E,viewerId:h}),i.createElement(m.qT,{hidePopover:E,creator:o}),i.createElement(I.F,{hidePopover:E,creator:o,viewer:n}),i.createElement(x.j,{hidePopover:E,creator:o,viewer:n}))}},i.createElement(T.r,{ariaControls:b,ariaExpanded:f?"true":"false",ariaLabel:"More options",onClick:v},i.createElement(F.Z,{className:r(Q)})))},$=(0,l.Ps)(H(),C.JP),z=n(73891);function X(){var e=o()(["\n  fragment TruncatedPostCardOverflowButton_post on Post {\n    creator {\n      id\n    }\n    ...TruncatedPostCardEditorWriterButton_post\n    ...TruncatedPostCardReaderButton_post\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}var Z=function(e){var t,n=e.post,r=e.publisherContext,o=(0,w.H)().value,l=(0,z.g)(null===(t=n.collection)||void 0===t?void 0:t.id).viewerEdge,a=!(null==l||!l.isEditor),u=n.creator,s=(null==o?void 0:o.id)===(null==u?void 0:u.id);return o?a||s?i.createElement(N,{post:n,isEditor:a,isWriter:s,publisherContext:r,creator:u}):i.createElement(q,{post:n,viewer:o}):null},Y=(0,l.Ps)(X(),W,$)},40917:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var r=n(59713),o=n.n(r),l=n(4743),i=n(14391),a=n(43198);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e,t){var n,r=null!==(n=(0,l.LI)(e).titleIndex)&&void 0!==n?n:(0,a.s)(e,a.j);return e.map((function(e,n){return e.type===i.NJ.IMG?function(e,t){return t?s(s({},e),{},{href:t}):e}(e,t):n===r?function(e,t){var n;return t?s(s({},e),{},{markups:[{anchorType:i.yG.LINK,type:i.Jh.A,start:0,end:(null==e||null===(n=e.text)||void 0===n?void 0:n.length)||0,href:t,userId:null,linkMetadata:null}]}):e}(e,t):e}))}},30570:(e,t,n)=>{"use strict";n.d(t,{sK:()=>m,L0:()=>f,q9:()=>v});var r=n(28655),o=n.n(r),l=n(63038),i=n.n(l),a=n(71439),u=n(67294),s=n(74908),c=n(53976);function d(){var e=o()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p=u.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){}}),m=function(){return u.useContext(p)},f=function(e){var t=e.children,n=u.useState(null),r=i()(n,2),o=r[0],l=r[1],a=u.useState(!1),d=i()(a,2),m=d[0],f=d[1],v=u.useState(null),E=i()(v,2),C=E[0],b=E[1],h=(0,c.VB)({name:"enable_inline_expansion",placeholder:null});return u.createElement(p.Provider,{value:{expandedPostId:o,setExpandedPostId:l,postInView:m,setPostInView:f,expandedPost:C,setExpandedPost:b}},u.createElement(s.k,{post:C,preload:!!h},t))},v=(0,a.Ps)(d())},32261:(e,t,n)=>{"use strict";n.d(t,{O1:()=>l}),n(59713);var r=n(67294),o=r.createContext(null),l=function(e){var t=e.event,n=e.children;return r.createElement(o.Provider,{value:{event:t}},n)}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/251.e5213de5.chunk.js.map